<div class="dashboard-container">
    <!-- Top Navbar -->
    <nav class="navbar">
        <div class="navbar-brand">Dashboard</div>
        <div class="navbar-links">
            <a href="#">Home</a>
            <a href="#">Notifications</a>
            <a href="#">Messages</a>
            <a href="#">Help</a>
        </div>
    </nav>

    <div class="content-container">
        <!-- Side Navigation -->
        <nav class="sidenav">
            <h3>Menu</h3>
            <ul>
                <li><a href="#">Home</a></li>
                <li><a href="#">Settings</a></li>
                <li><a href="#">Edit Profile</a></li>
                <li><a href="#">Log Out</a></li>
            </ul>
        </nav>

        <!-- Main Content -->
        <main class="main-content">
            <!-- User Info -->
            <div class="user-info">
                <h2>Welcome, {{ username }}</h2>
            </div> 

            <!-- Projects and Tasks Sections -->
            <div class="content-sections">
                <!-- Your Projects Section -->
                <div class="projects-container">
                    <h3>Your Projects</h3>
                    <div class="project-box" *ngFor="let project of createdProjects" (click)="navigateToProject(project.id)">
                        <h4>{{ project.name }}</h4>
                        <ul>
                            <li *ngFor="let task of project.tasks" [ngClass]="{
                                'todo': task.status === 'TODO', 
                                'ongoing': task.status === 'ONGOING', 
                                'testing': task.status === 'TESTING', 
                                'completed': task.status === 'COMPLETED'
                            }">
                                {{ task.name }} - <span class="status">{{ task.status }}</span>
                            </li>
                        </ul>
                    </div>
                </div>

                <!-- Tasks Assigned to You Section -->
                <div class="tasks-container">
                    <h3>Tasks Assigned to You</h3>
                    <div *ngIf="assignedTasks.length > 0; else noAssignedTasks">
                        <div class="task-box" *ngFor="let task of assignedTasks" (click)="navigateToProject(task.projectId)">
                            <h4>{{ task.name }}</h4>
                            <p>{{ task.description }}</p>
                            <p>Status: <span [ngClass]="{
                                'todo': task.status === 'TODO', 
                                'ongoing': task.status === 'ONGOING', 
                                'testing': task.status === 'TESTING', 
                                'completed': task.status === 'COMPLETED'
                            }">{{ task.status }}</span></p>
                            <p>Progress: {{ task.progress }}%</p>
                            <p>Deadline: {{ task.deadline | date }}</p>
                            <p>Project Name: {{task.projectName}}</p>
                            <button (click)="openUpdateTaskModal(task)">Update Task</button>
                        </div>
                    </div>
                    <ng-template #noAssignedTasks>
                        <p>No tasks assigned to you.</p>
                    </ng-template>
                </div>
            </div>
        </main>
    </div>
</div>
